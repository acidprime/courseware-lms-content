### Puppet Enterprise Orchestration

__Why does a user need to know about this topic in order to use product/feature/manage their configuration with PE?__


Right now, most users come to Puppet already with a background of system
administration via purpose built shell scripts. Then we tell them to trash all
those and immediately jump to a better way of doing things with Puppet's
configuration modeling language. This is a very large ask and a **high barrier
to entry**. Instead, we should show them how to leverage their existing scripts
and knowledge across their whole infrastructure with bolt/tasks. Then we can
move into state modeling and why it's important and useful to manage state over
time.

This lowers the barrier to entry and provides a smoother onramp to configuration
management.  The challenge will be avoiding the trap that we fell into with
early Fundamentals versions, where we tried going from Live Management to Puppet
and the transition was utterly jarring.

  
__What does a user need to know before they begin this module or course in order to succeed?__


Basic sysadmin skills:

* Server configuration and provisioning
* Maintenance tasks: installing packages, restarting services, etc
* Automating tasks with scripts; shell, powershell, python, etc. The language is
  a relatively unimportant implementation detail.
* Generating and publishing a Puppet module (if we teach sharing tasks in modules)


__What should a user be able to do after completing this module or course?__

* Basic skills
    * Run script or task from command line
    * Install and use tasks in modules

* Intermediate skills
    * Identify how to choose between config management (traditional Puppet) or tasks
    * Write & deploy a simple task (shell, ruby, or powershell)
    * Write tasks in multiple languages
    * Orchestrate multiple tasks into a plan
    
* Advanced skills
    * Convert plans into Puppet code to manage state long term.
    * Trigger actions via API for integration purposes


__How can we assess the user's comprehension?__


Since this module requires orchestration between multiple nodes, we don't have the
technical ability to assess comprehension via exercises yet. We will have to send
students to the [hands-on lab](https://github.com/puppetlabs/tasks-hands-on-lab)
generated by Engineering. This means that we'll have to use something like
quizzes, ideally after the workshop. The challenge will be to direct them back
to the self-paced course afterwards. Perhaps adding one or more links back from 
the workshop?


__What is in/out of scope for learning this topic?__

In scope:

* Skills listed above.
* Running the tools on the command line.
    * Puppet task/jobs from the cli
    * We'll still have to cover Bolt for ssh/winrm support and for plans
* Using the Console to trigger and monitor task orchestration.
* **Simple** PQL queries to select targeted nodes.
* Invoking custom scripts as tasks.

Out of scope:

* Anything more than the bare minimum of scripting languages that are not Puppet.
* Generating or publishing a Puppet module (other than the bare minimum).
* Advanced PQL queries.
* Teaching other parts of the PE stack, including advanced Console usage,
  classification, etc.


Alternative considerations:

We can take the approach that people should know Puppet syntax coming in to this
course and teach them Tasks & Plans as additional ways to manage infrastructure,
or we can take the approach that we start with Tasks and then mature into configuration
management with Puppet. That will affect what is in/out of scope.


#### Objective 1: Invoke existing tasks

__What sub-topics must be covered to achieve the objective?__


* Invoke task from CLI:
	*  Core functionality
	*  What are the key points of this topic?
	*  Do you have ideas for how to communicate this idea


* Invoke task from PE Console:
	*  Core functionality
	*  What are the key points of this topic?
	*  Do you have ideas for how to communicate this idea

#### Objective 2: Select/Filter targeted nodes via PQL or other means

__What sub-topics must be covered to achieve the objective?__


* Select nodes via facts & query in PE Console:
	*  Filters increase utility of the tool and the Console makes it easy to use
	*  What are the key points of this topic?
	*  Do you have ideas for how to communicate this topic?

* Select nodes via facts & query in CLI:
	*  CLI queries make the tool more flexible; eg they can be more complex or used in scripts
	*  What are the key points of this topic?
	*  Do you have ideas for how to communicate this topic?

#### Objective 3: Develop and deploy simple tasks via modules

__What sub-topics must be covered to achieve the objective?__


* Develop task in language of choice:
	*  Custom tasks are how you extend the functionality of the tool
	*  What are the key points of this topic?
	*  Do you have ideas for how to communicate this topic?

* Package task in module with metadata:
	*  This is how you can share your tasks with others
	*  What are the key points of this topic?
	*  Do you have ideas for how to communicate this topic?

* Combine tasks into plans:
	*  Plans allow you to orchestrate complex actions, with conditionals or involving multiple nodes
	*  What are the key points of this topic?
	*  Do you have ideas for how to communicate this topic?


#### Objective 4: Identify appropriate uses for tasks vs config management

__What sub-topics must be covered to achieve the objective?__


* Identify difference in functionality and implementation between the two
	*  Knowing what tasks/CM can & can't do is crucial to knowing how to choose one or the other
	*  What are the key points of this topic?
	*  Do you have ideas for how to communicate this topic?

* Identify the strengths of ad-hoc or scripted orchestration tasks and the strengths of config management
	*  Besides knowing what's *possible*, deeper understanding is what tool is better for what job
	*  What are the key points of this topic?
	*  Do you have ideas for how to communicate this topic?
